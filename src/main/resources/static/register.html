<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Torneos Express - Registro</title>
    <link rel="stylesheet" href="styles/styleRegister.css">
</head>

<body>
<h1>Registro</h1>
<div>
    <form id= "registration-form" action="submit_registration" method="post">
        <label for="name">Name:</label><br>
        <input type="text" id="name" name="name"><br>
        <label for="location">Location:</label><br>
        <input type="text" id="location" name="location"><br>
        <label for="email">Email:</label><br>
        <input type="email" id="email" name="email"><br>
        <label for="password">Password:</label><br>
        <input type="password" id="password" name="password"><br>
        <input type="button" value="Register" name="register_button" onclick="register()">
    </form>
    <script>
        function register() {
            const name = document.getElementById('name').value;
            const location = document.getElementById('location').value;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            const registerRequest = {
                name: name,
                location: location,
                email: email,
                password: password
            };

            const xhr = new XMLHttpRequest();
            xhr.open('POST', 'submit_registration', true);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.onload = function() {
                if (xhr.status === 200) {
                    // Handle successful registration
                    const response = JSON.parse(xhr.responseText);
                    console.log(response);
                    // save token or handle response as needed
                    localStorage.setItem("token", response.token);
                    // Redirect to home page or show success message
                    window.location.replace("home.html");
                } else {
                    // Handle error
                    console.error(xhr.responseText);
                    // Redirect to registration error page
                    window.location.replace("login_error.html");
                }
            };
            xhr.send(JSON.stringify(registerRequest));
        }

    </script>

</div>

<a href="login.html">Iniciar Sesi√≥n</a>
<a href="index.html">Volver</a>



</body>
</html>
